<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Inflacja vs Poziom Cen - Symulator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            background-color: #ffffff;
            color: #1d3e53;
            font-family: 'Inter', sans-serif;
            touch-action: manipulation;
            overflow-x: hidden;
        }
        .mint-text { color: #5cc180; }
        .navy-bg { background-color: #1d3e53; }
        .navy-text { color: #1d3e53; }
        .card { 
            background-color: #f8fafc; 
            border: 1px solid #e2e8f0; 
        }
        input[type=range] {
            accent-color: #5cc180;
            height: 1.2rem;
        }
        html {
            scroll-behavior: smooth;
        }
    </style>
</head>
<body class="p-4 md:p-12 bg-gray-50">
    <div class="max-w-3xl mx-auto flex flex-col gap-6">
        <header class="text-center">
            <h1 class="text-3xl font-bold navy-text">Metafora Samochodu</h1>
            <p class="text-gray-500">Prędkość (inflacja) vs Przebieg (ceny)</p>
        </header>

        <!-- Statystyki (Punkt zaczepienia dla scrolla) -->
        <div id="statsSection" class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="card rounded-xl p-6 text-center shadow-sm">
                <p class="text-xs text-gray-500 uppercase font-bold tracking-wider mb-2">Inflacja</p>
                <div class="text-4xl font-mono font-bold mint-text" id="speedDisplay">2.5%</div>
                <p class="text-xs text-gray-400 mt-2 font-medium" id="typeLabel">TEMPO WZROSTU CEN</p>
            </div>
            <div class="card rounded-xl p-6 text-center shadow-sm">
                <p class="text-xs text-gray-500 uppercase font-bold tracking-wider mb-2">Poziom Cen</p>
                <div class="text-4xl font-mono font-bold navy-text" id="odometerDisplay">100.00</div>
                <p class="text-xs text-gray-400 mt-2 font-medium uppercase">PRZEBIEG (PLN)</p>
            </div>
        </div>

        <!-- Sterowanie i Suwak -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 items-stretch">
            <div class="flex gap-2">
                <button id="startBtn" class="flex-1 bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-4 rounded-xl shadow-md flex items-center justify-center gap-2 transition-all">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg> START
                </button>
                <button id="stopBtn" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-600 font-bold py-4 rounded-xl flex items-center justify-center gap-2 transition-all">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h12v12H6z"/></svg> STOP
                </button>
            </div>
            <div class="card rounded-xl p-4 flex flex-col justify-center">
                <div class="flex justify-between items-center mb-2">
                    <label class="text-xs font-bold navy-text uppercase">Gaz (Inflacja):</label>
                    <span class="mint-text font-bold text-lg" id="sliderVal">2.5%</span>
                </div>
                <input type="range" id="inflationSlider" min="0" max="25" value="2.5" step="0.1" class="w-full">
                <div class="flex justify-between text-[10px] text-gray-400 mt-2 uppercase font-medium">
                    <span>0%</span>
                    <span class="text-emerald-600 font-bold">Cel: 2.5%</span>
                    <span>Galopująca: 20%+</span>
                </div>
            </div>
        </div>

        <!-- Dynamiczny Komunikat -->
        <div id="insightBox" class="p-5 rounded-xl border-l-4 border-blue-400 bg-blue-50 transition-colors duration-300 shadow-sm">
            <strong id="insightTitle" class="block text-sm navy-text mb-1 uppercase tracking-wider">Silnik wyłączony</strong>
            <p id="insightText" class="text-sm text-gray-600 leading-relaxed italic">Naciśnij START, aby zobaczyć jak inflacja zakrzywia linię cen w czasie.</p>
        </div>

        <!-- Wykres -->
        <div class="card rounded-xl p-4 shadow-sm bg-white min-h-[350px]">
            <canvas id="priceChart"></canvas>
        </div>

        <footer class="text-center pb-8">
            <p class="text-[10px] text-gray-400 italic mb-4">
                * Symulacja nie uwzględnia spadku cen (deflacji).
            </p>
            <p class="text-xs text-gray-300 uppercase tracking-[0.2em] font-bold">RodziceInwestują.pl</p>
        </footer>
    </div>

    <script>
        const slider = document.getElementById('inflationSlider');
        const speedDisplay = document.getElementById('speedDisplay');
        const odometerDisplay = document.getElementById('odometerDisplay');
        const sliderValText = document.getElementById('sliderVal');
        const insightTitle = document.getElementById('insightTitle');
        const insightText = document.getElementById('insightText');
        const insightBox = document.getElementById('insightBox');
        const startBtn = document.getElementById('startBtn');
        const stopBtn = document.getElementById('stopBtn');
        const statsSection = document.getElementById('statsSection');
        const ctx = document.getElementById('priceChart').getContext('2d');

        let isRunning = false;
        let currentPriceLevel = 100.00;
        const maxDataPoints = 300; 
        let priceData = Array(maxDataPoints).fill(100);
        let labels = Array(maxDataPoints).fill("");

        const chart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Poziom cen',
                    data: priceData,
                    borderColor: '#1d3e53',
                    borderWidth: 3,
                    pointRadius: 0,
                    fill: true,
                    backgroundColor: 'rgba(92, 193, 128, 0.05)',
                    tension: 0.1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    x: { display: false },
                    y: { 
                        grid: { color: '#f1f5f9' },
                        ticks: { color: '#94a3b8', font: { size: 10 } },
                        title: {
                            display: true,
                            text: 'POZIOM CEN (PLN)',
                            color: '#94a3b8',
                            font: {
                                size: 10,
                                weight: 'bold'
                            }
                        }
                    }
                },
                animation: { duration: 0 }
            }
        });

        function updateSimulation() {
            if (!isRunning) return;
            const inflationRate = parseFloat(slider.value) / 100;
            const stepFactor = 0.015; 
            const increment = (currentPriceLevel * inflationRate) * stepFactor;
            currentPriceLevel += increment;
            priceData.push(currentPriceLevel);
            priceData.shift();
            chart.update();
            odometerDisplay.innerText = currentPriceLevel.toFixed(2);
            updateStatusText();
        }

        function updateStatusText() {
            const val = parseFloat(slider.value);
            speedDisplay.innerText = val.toFixed(1) + '%';
            if (!isRunning) {
                insightBox.className = "p-5 rounded-xl border-l-4 border-gray-400 bg-gray-50";
                insightTitle.innerText = "Silnik wyłączony";
                insightText.innerText = "Ceny stoją w miejscu. Uruchom silnik, aby rozpocząć jazdę przez świat inflacji.";
                return;
            }
            if (val === 0) {
                insightBox.className = "p-5 rounded-xl border-l-4 border-blue-400 bg-blue-50";
                insightTitle.innerText = "Bieg jałowy (Inflacja 0%)";
                insightText.innerText = "Ceny są stabilne. W tej symulacji Twoja siła nabywcza nie ulega zmianie.";
            } else if (val < 5) {
                insightBox.className = "p-5 rounded-xl border-l-4 border-emerald-400 bg-emerald-50";
                insightTitle.innerText = "Inflacja pełzająca (Niskie tempo)";
                insightText.innerText = "Ceny rosną powoli. To tempo zbliżone do celu NBP, uznawane za bezpieczne dla gospodarki.";
            } else if (val <= 10) {
                insightBox.className = "p-5 rounded-xl border-l-4 border-yellow-400 bg-yellow-50";
                insightTitle.innerText = "Inflacja krocząca (Umiarkowane tempo)";
                insightText.innerText = "Wzrost cen staje się wyraźnie odczuwalny. Oszczędności zaczynają tracić na wartości szybciej.";
            } else if (val <= 20) {
                insightBox.className = "p-5 rounded-xl border-l-4 border-orange-500 bg-orange-50";
                insightTitle.innerText = "Inflacja galopująca (Wysokie tempo)";
                insightText.innerText = "Bardzo wysoka prędkość. Trudno utrzymać wartość kapitału bez agresywnego inwestowania.";
            } else {
                insightBox.className = "p-5 rounded-xl border-l-4 border-red-600 bg-red-50";
                insightTitle.innerText = "Zagrożenie hiperinflacją (Ekstremalne tempo)";
                insightText.innerText = "Pieniądz traci wartość błyskawicznie. Linia wykresu staje się niemal pionowa.";
            }
        }

        startBtn.addEventListener('click', () => {
            isRunning = true;
            startBtn.className = "flex-1 bg-emerald-600 text-white font-bold py-4 rounded-xl shadow-lg ring-4 ring-emerald-100 flex items-center justify-center gap-2 transition-all";
            stopBtn.className = "flex-1 bg-gray-200 text-gray-600 font-bold py-4 rounded-xl flex items-center justify-center gap-2 transition-all";
            
            // Scroll do sekcji statystyk (teraz działa na każdym urządzeniu)
            statsSection.scrollIntoView({ behavior: 'smooth' });
            
            updateStatusText();
        });

        stopBtn.addEventListener('click', () => {
            isRunning = false;
            startBtn.className = "flex-1 bg-emerald-500 text-white font-bold py-4 rounded-xl shadow-md flex items-center justify-center gap-2 transition-all";
            stopBtn.className = "flex-1 bg-gray-300 text-gray-800 font-bold py-4 rounded-xl ring-4 ring-gray-100 flex items-center justify-center gap-2 transition-all";
            updateStatusText();
        });

        slider.addEventListener('input', () => {
            sliderValText.innerText = parseFloat(slider.value).toFixed(1) + '%';
            updateStatusText();
        });

        setInterval(updateSimulation, 100);
        updateStatusText();
    </script>
</body>
</html>
